/** https://github.com/datalog/datamatrix-svg under MIT license */
"use strict";function DATAMatrix($){var _=[],r=0,t=0,e=function($,r){_[r]=_[r]||[],_[r][$]=1},n=function($){var _={FNC1:232,GS:29},r=Array.from($.matchAll(/<(FNC1|GS)>/g)),t=[];for(var e in r)t.push(r[e].index);for(var n=[],f=$.length,o=0;o<f;o++){var h=t.indexOf(o);if(h>=0){var e=r[h][1];_.hasOwnProperty(e)&&(n.push(_[e]),o=o+e.length+1)}else{var i=$.charCodeAt(o),s=o+1<f?$.charCodeAt(o+1):0;i>47&&i<58&&s>47&&s<58?(n.push((i-48)*10+s+82),o++):i>127?(n.push(235),n.push(i-127&255)):n.push(i+1)}}return n},f=function($){var _=[231],r=$.length;250<r&&_.push(37+(r/250|0)&255),_.push(r%250+149*(_.length+1)%255+1&255);for(var t=0;t<r;t++)_.push($.charCodeAt(t)+149*(_.length+1)%255+1&255);return _},o=function($){for(var _,r=$.length,t=r+1&-4,e=0,f=t>0?[240]:[],o=0;o<t;o++){if(o<t-1){if((_=$.charCodeAt(o))<32||_>94)return[]}else _=31;e=64*e+(63&_),(3&o)==3&&(f.push(e>>16),f.push(e>>8&255),f.push(255&e),e=0)}return t>r?f:f.concat(n($.substr(0==t?0:t-1)))},h=function($,_){var r,t,e=0,f=0,o=$.length,h=[_[0]],i=function($){f=40*f+$,2==e++&&(h.push(++f>>8),h.push(255&f),e=f=0)};for(r=0;r<o&&(0!=e||r!=o-1);r++){var s=$.charCodeAt(r);for(s>127&&238!=h[0]&&(i(1),i(30),s-=128),t=1;s>_[t];t+=3);var u=_[t+1];if(8==u||9==u&&0==e&&r==o-1)return[];if(u<5&&2==e&&r==o-1)break;u<5&&i(u),i(s-_[t+2])}return 2==e&&238!==h[0]&&i(0),h.push(254),(e>0||r<o)&&(h=h.concat(n($.substr(r-e)))),h},i=function($,_){$=unescape(encodeURI($));var i=n($),s=i.length,u=h($,[230,31,0,0,32,9,29,47,1,33,57,9,44,64,1,43,90,9,51,95,1,69,127,2,96,255,1,0]),a=u.length;a>0&&a<s&&(i=u,s=a),(a=(u=h($,[239,31,0,0,32,9,29,47,1,33,57,9,44,64,1,43,90,2,64,95,1,69,122,9,83,127,2,96,255,1,0])).length)>0&&a<s&&(i=u,s=a),(a=(u=h($,[238,12,8,0,13,9,13,31,8,0,32,9,29,41,8,0,42,9,41,47,8,0,57,9,44,64,8,0,90,9,51,255,8,0])).length)>0&&a<s&&(i=u,s=a),(a=(u=o($)).length)>0&&a<s&&(i=u,s=a),(a=(u=f($)).length)>0&&a<s&&(i=u,s=a);var l,p,v,c,g,d,m,w,A=1,C=1,b=-1,x=1,M=Array(70),N=Array(70),S=Array(256),y=Array(255);if(_&&s<50){u=[16,7,28,11,24,14,32,18,32,24,44,28];do a=(p=u[++b])*(l=6+(12&b))/8;while(a-u[++b]<s);p>25&&(A=2)}else{p=l=6,g=2,u=[5,7,10,12,14,18,20,24,28,36,42,48,56,68,84,112,144,192,224,272,336,408,496,620];do{if(++b==u.length)return[0,0];p>11*g&&(g=4+g&12),a=(p=l+=g)*l>>3}while(a-u[b]<s);p>27&&(C=A=2*(p/54|0)+2),a>255&&(x=2*(a>>9)+2)}for(w=u[b],v=p/A,c=l/C,s<a-w&&(i[s++]=129);s<a-w;)i[s++]=(149*s%253+130)%254;for(w/=x,b=1,g=0;g<255;g++)y[g]=b,S[b]=g,(b+=b)>255&&(b^=301);for(M[w]=0,g=1;g<=w;g++)for(M[b=w-g]=1;b<w;b++)M[b]=M[b+1]^y[(S[M[b]]+g)%255];for(d=0;d<x;d++){for(g=0;g<=w;g++)N[g]=0;for(g=d;g<s;g+=x)for(b=0,z=N[0]^i[g];b<w;b++)N[b]=N[b+1]^(z?y[(S[M[b]]+S[z])%255]:0);for(g=0;g<w;g++)i[s+d+g*x]=N[g]}for(g=0;g<l+2*C;g+=c+2)for(b=0;b<p+2*A;b++)e(b,g+c+1),(1&b)==0&&e(b,g);for(g=0;g<p+2*A;g+=v+2)for(b=0;b<l;b++)e(g,b+(b/c|0)*2+1),(1&b)==1&&e(g+v+1,b+(b/c|0)*2);for(w=2,d=0,m=4,x=[0,0,-1,0,-2,0,0,-1,-1,-1,-2,-1,-1,-2,-2,-2],g=0;g<a;m-=w,d+=w){if(m==l-3&&-1==d)u=[p,6-l,p,5-l,p,4-l,p,3-l,p-1,3-l,3,2,2,2,1,2];else if(m==l+1&&1==d&&(7&p)==0&&(7&l)==6)u=[p-2,-l,p-3,-l,p-4,-l,p-2,-1-l,p-3,-1-l,p-4,-1-l,p-2,-2,-1,-2];else{if(0==m&&d==p-2&&3&p)continue;if(m<0||d>=p||m>=l||d<0)for(m+=2+(w=-w)/2,d+=2-w/2;m<0||d>=p||m>=l||d<0;)m-=w,d+=w;if(m==l-2&&0==d&&3&p)u=[p-1,3-l,p-1,2-l,p-2,2-l,p-3,2-l,p-4,2-l,0,1,0,0,0,-1];else if(m==l-2&&0==d&&(7&p)==4)u=[p-1,5-l,p-1,4-l,p-1,3-l,p-1,2-l,p-2,2-l,0,1,0,0,0,-1];else{if(1==m&&d==p-1&&(7&p)==0&&(7&l)==6)continue;u=x}}for(s=i[g++],b=0;s>0;b+=2,s>>=1)if(1&s){var z=d+u[b],E=m+u[b+1];z<0&&(z+=p,E+=4-(p+4&7)),E<0&&(E+=l,z+=4-(l+4&7)),e(z+2*(z/v|0)+1,E+2*(E/c|0)+1)}}for(g=p;3&g;g--)e(g,g);r=p+2*A,t=l+2*C};return function(){function e($){return/^#[0-9a-f]{3}(?:[0-9a-f]{3})?$/i.test($)}function n($,_){for(var r in $=document.createElementNS(p,$),_||{})$.setAttribute(r,_[r]);return $}var f,o,h,s,u,a,l=Math.abs,p="http://www.w3.org/2000/svg",v="",c="string"==typeof $?{msg:$}:$||{},g=c.pal||["#000"],d=l(c.dim)||256,m=l(c.pad),m=m>-1?m:2,w=[1,0,0,1,m,m],A=g[0],A=e(A)?A:"#000",C=g[1],C=e(C)?C:0,b=c.vrb?0:1;for(i(c.msg||"",c.rct),u=r+2*m,a=t+2*m,h=t;h--;)for(s=0,o=r;o--;)_[h][o]&&(b?(s++,_[h][o-1]||(v+="M"+o+","+h+"h"+s+"v1h-"+s+"v-1z",s=0)):v+="M"+o+","+h+"h1v1h-1v-1z");return f=n("svg",{viewBox:[0,0,u,a].join(" "),width:d/a*u|0,height:d,fill:A,"shape-rendering":"crispEdges",xmlns:p,version:"1.1"}),C&&f.appendChild(n("path",{fill:C,d:"M0,0v"+a+"h"+u+"V0H0Z"})),f.appendChild(n("path",{transform:"matrix("+w+")",d:v})),f}()}